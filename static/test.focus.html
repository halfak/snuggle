<html>
	<head>
		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="stylesheet" href="css/ui.button.css" />
		<script language="javascript" src="js/lib/jquery-1.8.1.min.js"></script>
		<script language="javascript" src="js/lib/class.js"></script>
		<script language="javascript" src="js/lib/date.format.js"></script>
		<script language="javascript" src="js/lib/javascript.js"></script>
		<script language="javascript" src="js-new/env.js"></script>
		<script language="javascript" src="js-new/event.js"></script>
		<script language="javascript" src="js-new/logging.js"></script>
		<script language="javascript" src="js-new/util.js"></script>
		<script language="javascript" src="js-new/ui.button.js"></script>
		<script language="javascript" src="js-new/ui.fields.js"></script>
		<script language="javascript" src="js-new/ui.action_menu.js"></script>
	</head>
	<body>
		<script type="text/javascript">
					
			select = new ui.SelectField(
				"foobar", 
				[{value:"Bar"}, {value:"Foo"}],
				{
					label: "Foo Field: "
				}
			)
			$('body').append(select.node)
					
			radio = new ui.RadioField(
				"foobar", 
				[
					new ui.RadioField.Radio("foo1", 1),
					new ui.RadioField.Radio("foo2", 2),
					new ui.RadioField.Radio("foo3", 3),
					new ui.RadioField.Radio("foo4", 4)
				],
				{
					default: 2
				}
			)
			radio.changed.attach(function(_, radio){
				console.log("radio value changed to " + radio.value)
			})
			$('body').append(radio.node)
			
			button = new ui.Button({label: "Foobar"})
			button.activated.attach(function(_){console.log("button activated")})
			button.focus_changed.attach(function(_, focused){console.log("button focus changed " + focused)})
			$('body').append(button.node)
			
			form = $("<form>")
			text = ui.Field.from_doc(
				{
					type: "text",
					name: "A text field",
					label: "A text field"
				}
			)
			text.changed.attach(function(text){console.log("text changed to '" + text.val() + "'")})
			form.append(text.node)
			$('body').append(form)
			form.submit(function(e){return text.val() == "submit"})
			
			config = {
				user_actions: [
					{
						name: "send message",
						description: "Posts a new message on the user's talk page." ,
						fields: [
							{
								name: "header",
								label: "Header",
								type: "text",
								default: "Hello %(user_name)s"
							},
							{
								name: "message",
								label: "Message",
								type: "textarea"
							}
						]
					}
				]
			}
			
			actions = config.user_actions.map(ui.UserAction.from_doc)
			action_menu = new ui.ActionMenu(actions)
			$('body').append(action_menu.node)
			
			
		</script>
	<body>
